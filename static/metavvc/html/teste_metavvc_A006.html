<!DOCTYPE html>
<html lang="pt-br">
<head>
<title>MetaVVC - Ambiente virtual apenas com JS</title>
<meta charset="utf-8">
<style>
	body {
		font-family: Arial, Helvetica, sans-serif;
		font-weight: bold;
		padding: 0px;
		margin : 0px;
		border:0px;
		background-color: #080808;
	}
	#DivIntroload{
		display : none;
	}
	.DivIntroA{
		border: solid 2px #00ffea;
		border-radius: 5px;
		padding: 5px;
		background-color:#00ffea;
		background: rgba(0, 255, 255, 0.2);
		color: #00ffea;
		font-size: 50px;
		text-align: center;
		text-decoration: none;
		cursor: pointer;
		outline: 0;
		box-sizing: border-box;
		font-style: normal;
		width: 100%;
		max-width: 500px;
	}
	.divIntro{
		padding: 50px;
		background-image: url(/static/assetsv5/img/metaversovvcinit.jpg);
		font-size: 25px;
		background-size: 100%;
		position: absolute;
		top: 0px;
		height: 100%;
		width: 100%;
		text-align: center;
		color: #FFFFFF;
	}
	.divControles{
		position: absolute;
		top: 0px;
		height: 100%;
		width: 100%;
	}
	.justific{
		display: flex;
		justify-content: space-between;
		width: 100%;
	}
	.controles{
		font-size: 20px;
		height: 80%;
		bottom: 0
	}
	.spanDados{
		color: #FFFFFF;
		font-size: 20px;
	}
	.divControEsq{
		padding: 10px;
		width: 24%;
	}
	.divControCentro{
		width: 60%;
		height: 200px;
		margin:10px;
		padding: 10px;
		justify-content: center;
		border:solid 3px;
		border-radius:2px;
		border-color:#000;
	}
	.divControDire{
		padding: 10px;
		width: 24%;
	}
	.divDadosP{
		width: 10%;
	}
	.divDadosM{
		width: 15%;
	}
	.divDadosG{
		width: 20%;
	}
	
	.joystickConteiner{
		width: 200px;
		height: 200px;
		align-items: center;
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		justify-content: center;
		border:solid 3px;
		border-radius:50%;
		border-color:#fff;
		background-color: #000;
		opacity: 0.2;
	}              
	
	.joystickClass{
		position: absolute;
		background-color: #fff;
		width: 100px;
		height: 100px;
		border-color:#000;
		border:solid 1px;
		border-radius:50%;
		opacity: 0.3;
	}
</style>
</head>

<body>
	<script src="/static/assetsv5/js/three.min.js"></script>
	<script src="/static/assetsv5/js/GLTFLoader.js"></script>
<script>

var renderer = new THREE.WebGLRenderer();
var x, y, scene, camera;
var idSpanDados1, idSpanDados2, idSpanDados3, idSpanTitulo, idSpanTexto, idSpanURL, idEvador, idPagina
var listObjEmCena=[];
var geometry=[];
var material=[];
const pixel3d=10;
const largura=window.innerWidth;
const altura=window.innerHeight;
var listLus = [];
var carregando = 0;
var andarAtual = "";
var contJanela =0;


var angulo = 0;
//var anguloOlhar = 0;
var fococamera = {x:0, y:40, z:-5,ladox:5,ladoy:0, ladoz:0} //y altura

var dadosMetaVerso = {
	elevador : {carrega : false, url:"/static/metavvc/3d/meta_vvc_elevador.glb", objeto3D : "vazio"},
	design  : {carrega : false, url:"/static/metavvc/3d/meta_vvc_sala_design.glb", objeto3D : "vazio", links:[],solid:[],escada:[]},
	eu : {carrega : false, url:"/static/metavvc/3d/meta_vvc_sala_eu.glb", objeto3D : "vazio", links:[],solid:[],escada:[]},
	home : {carrega : false, url:"/static/metavvc/3d/meta_vvc_sala_home2.glb", objeto3D : "vazio", links:[],solid:[],escada:[]},
	jogos : {carrega : false, url:"/static/metavvc/3d/meta_vvc_sala_jogos.glb", objeto3D : "vazio", links:[],solid:[],escada:[]},
	tutorial : {carrega : false, url:"/static/metavvc/3d/meta_vvc_sala_tutorial.glb", objeto3D : "vazio", links:[],solid:[],escada:[]},
	utilitarios : {carrega : false, url:"/static/metavvc/3d/meta_vvc_sala_utilitarios.glb", objeto3D : "vazio", links:[],solid:[],escada:[]},
	maos : {carrega : false, url:"/static/metavvc/3d/maos_player_2.glb", objeto3D : "vazio"}
};


function initLight(){

	/*
	// Lus da Lanterna
	listLus[0] = new THREE.PointLight( 0x505050, 2, 200 ); // Cria Luz
	listLus[0].position.set( 10, 10, 10 );
	listLus[0].castShadow = true;
	listLus[0].shadow.mapSize.width = 512; // default
	listLus[0].shadow.mapSize.height = 512; // default
	listLus[0].shadow.camera.near = 0.5; // default
	listLus[0].shadow.camera.far = 500; // default
	//scene.add( listLus[0] );
	*/

	// Lus do elevador
	listLus[1] = new THREE.PointLight( 0x505050, 2, 200 ); // Cria Luz
	listLus[1].position.set( 1, 91, 1 );
	scene.add( listLus[1] );

	listLus[2] = new THREE.DirectionalLight("rgb(100,100,100)", 2);
	listLus[2].position.x = 500;
	listLus[2].position.y = 400;
	listLus[2].position.z = -500;
	scene.add(listLus[2]);
	//const helper = new THREE.DirectionalLightHelper( listLus[2], 5 ); // Cria uma referencia para luz (luz associada, tamanho)
	//scene.add( helper );

	listLus[3] = new THREE.DirectionalLight("rgb(20,20,45)", 2);
	listLus[3].position.x = -600;
	listLus[3].position.y = -400;
	listLus[3].position.z = 600;
	scene.add(listLus[3]);

}

function initMaterial(){
	/*
	const loader = new THREE.TextureLoader();
	const urlImgTexture = loader.load('https://st3.depositphotos.com/30440304/i/600/depositphotos_343055824-stock-photo-seamless-scifi-panels-futuristic-texture.jpg');
	const listaMateriais = [
                new THREE.MeshBasicMaterial({map: urlImgTexture}),
                new THREE.MeshBasicMaterial({map: urlImgTexture}),
                new THREE.MeshBasicMaterial({map: urlImgTexture}),
                new THREE.MeshBasicMaterial({map: urlImgTexture}),
                new THREE.MeshBasicMaterial({map: urlImgTexture}),
                new THREE.MeshBasicMaterial({map: urlImgTexture})
            ];
	*/
	material[0] = new THREE.MeshLambertMaterial({ color: "rgb(255,255,255)"});
	material[1] = new THREE.MeshLambertMaterial({ color: "rgb(192,192,192)"});
	material[2] = new THREE.MeshLambertMaterial({ color: "rgb(128,128,128)"});
	material[3] = new THREE.MeshLambertMaterial({ color: "rgb(255,0,0)"});
	material[4] = new THREE.MeshLambertMaterial({ color: "rgb(158,0,0)"});
	material[5] = new THREE.MeshLambertMaterial({ color: "rgb(98,0,0)"});
	material[6] = new THREE.MeshLambertMaterial({ color: "rgb(255,255,0)"});
	material[7] = new THREE.MeshLambertMaterial({ color: "rgb(176,176,0)"});
	material[8] = new THREE.MeshLambertMaterial({ color: "rgb(255,162,0)"});
	material[9] = new THREE.MeshLambertMaterial({ color: "rgb(176,176,0)"});
	material[10] = new THREE.MeshLambertMaterial({ color: "rgb(138,87,0)"});
	material[11] = new THREE.MeshLambertMaterial({ color: "rgb(255,0,200)"});
	material[12] = new THREE.MeshLambertMaterial({ color: "rgb(124,56,143)"});
	material[13] = new THREE.MeshLambertMaterial({ color: "rgb(0,255,42)"});
	material[14] = new THREE.MeshLambertMaterial({ color: "rgb(0,117,20)"});
	material[15] = new THREE.MeshLambertMaterial({ color: "rgb(0,138,135)"});
	material[16] = new THREE.MeshLambertMaterial({ color: "rgb(0,0,255)"});
	material[17] = new THREE.MeshLambertMaterial({ color: "rgb(0,0,125)"});
	material[18] = new THREE.MeshLambertMaterial({ color: "rgb(0,238,255)"});

	//material[18] = new THREE.MeshBasicMaterial({map: urlImgTexture});
	/*
	material[18] = [
				listaMateriais[0],
				listaMateriais[1],
				listaMateriais[2],
				listaMateriais[3],
				listaMateriais[4],
				listaMateriais[5]
    ];
	*/

}

function LoadDadeTutorial(){
	let a=0;
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"elevador", 
		texto:"menu", 
		url:"/",
		x:0, y:30, z:0,
		img:"/logo_vvc.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutoriais", 
		texto:"Meu objetivo com esses tutoriais é compartilhar um pouco do meu conhecimento técnico. Espero que possa contribuir com o seu crescimento profissional, de alguma foma.", 
		url:"/pt/tutorial/",
		x:5, y:30, z:122,
		img:"/logo_vvc.png"}
	//Andar de cima
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutorial HTML", 
		texto:"HTML5 é uma linguagem de marcação para a World Wide Web e é uma tecnologia chave da Internet,originalmente proposto por Opera Software.", 
		url:"/pt/tutorial/html/", 
		x:-215, y:150, z:150, 
		img:"/codigo/logohtml.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Estrutura do HTML", 
		texto:"O documento HTML sempre inicia com o que chamamos de estrutura básica.", 
		url:"/pt/tutorial/html/estrutura/", 
		x:-215, y:150, z:250, 
		img:"/codigo/logohtml.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Titulo e Paragrafo HTML", 
		texto:"As Heading Tags (H1, H2, H3, ...) são recursos de programação HTML utilizados para destacar títulos e sub-títulos de uma página. H1 é a abreviação do inglês para Header 1, ou Cabeçalho 1, logo, o mais importante dos Headers.", 
		url:"/pt/tutorial/html/h1_p_br/", 
		x:-215, y:150, z:350, 
		img:"/codigo/logohtml.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Lista HTML", 
		texto:"A tag ul define uma listas não ordenadas. A tag li define um item da lista.", 
		url:"/pt/tutorial/html/lista01/", 
		x:-215, y:150, z:450, 
		img:"/codigo/logohtml.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutorial HTML Tabelas", 
		texto:"A tag table define uma tabela HTML. Uma tabela HTML consiste no elemento table e em um ou mais elementos tr , th e td .", 
		url:"/pt/tutorial/html/tabela/", 
		x:-215, y:150, z:550, 
		img:"/codigo/logohtml.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutorial DIV e SPAN", 
		texto:"A tag div define uma divisão ou seção em um documento HTML.", 
		url:"/pt/tutorial/html/div_span/", 
		x:215, y:150, z:550, 
		img:"/codigo/logohtml.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Detail HTML",
		texto:"O elemento HTML details (details) é usado como uma ferramenta de onde o usuário irá obter informações adicionais.", 
		url:"/pt/tutorial/html/details/", 
		x:215, y:150, z:450, 
		img:"/codigo/logohtml.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Canvas HTML", 
		texto:"Canvas é um elemento da HTML5 destinado a delimitar uma área para renderização dinâmica de gráficos.", 
		url:"/pt/tutorial/html/canvas/", 
		x:215, y:150, z:350, 
		img:"/codigo/logohtml.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutorial CSS", 
		texto:"Cascading Style Sheets é um mecanismo para adicionar estilo a um documento web. ", 
		url:"/pt/tutorial/css/", 
		x:215, y:150, z:250, 
		img:"/codigo/logocss.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutorial CCS img e text", 
		texto:"Cascading Style Sheets é um mecanismo para adicionar estilo a um documento web. ", 
		url:"/pt/tutorial/css/css02/", 
		x:215, y:150, z:150, 
		img:"/codigo/logocss.png"}
	//Andar do elevador
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Introdução ao JavaScript", 
		texto:"JavaScript é uma das linguagem de programação mais utilizadas. É uma das principais tecnologias da World Wide Web.", 
		url:"/pt/tutorial/javascript/", 
		x:-215, y:30, z:150, 
		img:"/codigo/logojs.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutorial Node.JS", 
		texto:"Trata-se de um software open-source, cross-platform, e de um runtime de JavaScript que execute código de JavaScript a nível backend e frontend.", 
		url:"/pt/tutorial/javascript/nodejs/", 
		x:-215, y:30, z:250, 
		img:"/codigo/logonodejs.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutorial React", 
		texto:"O React é uma biblioteca JavaScript de código aberto com foco em criar interfaces de usuário em páginas web.", 
		url:"/pt/tutorial/javascript/reactjs/", 
		x:-215, y:30, z:350, 
		img:"/codigo/logoreactjs.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutorial React", 
		texto:"O React é uma biblioteca JavaScript de código aberto com foco em criar interfaces de usuário em páginas web.", 
		url:"/pt/componentes/", 
		x:-215, y:30, z:450, 
		img:"/codigo/logoreactjs.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutorial NextJS", 
		texto:"NextJS é um framework amplamente utilizado pela comunidade do ReactJS.", 
		url:"/pt/tutorial/javascript/nextjs/", 
		x:-215, y:30, z:550, 
		img:"/codigo/logonextjs.jpg"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutorial Three.JS", 
		texto:"Three é uma biblioteca JavaScript/API cross-browser usada para criar e mostrar gráficos 3D animados em um navegador web, usando Canvas e WebGL.", 
		url:"/pt/tutorial/javascript/three/", 
		x:215, y:30, z:550, 
		img:"/codigo/logothreejs.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutoriais P5", 
		texto:"É uma biblioteca JavaScript para codificação criativa, com foco em tornar a codificação acessível e inclusiva para artistas, designers, educadores, iniciantes e qualquer outra pessoa.", 
		url:"/pt/tutorial/javascript/p5/", 
		x:215, y:30, z:450, 
		img:"/codigo/logop5js.jpg"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutoriais Babylon", 
		texto:"Babylon.js é uma biblioteca JavaScript para exibir gráficos 3D em um navegador da web via HTML5.", 
		url:"/pt/tutorial/javascript/babylon/", 
		x:215, y:30, z:350, 
		img:"/codigo/logobabylon.svg"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutoriais Knockout", 
		texto:"Knockout é uma implementação JavaScript independente do padrão Model-View-ViewModel com modelos.", 
		url:"/pt/tutorial/javascript/knockout/", 
		x:215, y:30, z:250, 
		img:"/codigo/logojs.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutoriais CANVAS", 
		texto:"Canvas é um elemento da HTML5 destinado a delimitar uma área para renderização dinâmica de gráficos. Todo o trabalho de criação e animação é realizado através de linguagens de programação dinâmica.", 
		url:"/pt/tutorial/html/canvas/", 
		x:215, y:30, z:150, 
		img:"/codigo/logojs.png"}
	//Andar de baixo
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutorial SVG", 
		texto:"Trata-se de uma linguagem XML para descrever de forma vetorial desenhos e gráficos bidimensionais.", 
		url:"/pt/tutorial/html/svg01/", 
		x:-215, y:-110, z:150, 
		img:"/codigo/logohtml.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"O que é Java", 
		texto:"Java é uma linguagem de programação orientada a objetos desenvolvida na década de 90 por uma equipe de programadores chefiada por James Gosling, na empresa Sun Microsystems.", 
		url:"/pt/tutorial/java/", 
		x:-215, y:-110, z:250, 
		img:"/codigo/logojava.svg"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"tutorial ASP", 
		texto:"O ASP Clássico é uma estrutura de bibliotecas básicas para processamento de linguagens de script no lado servidor.", 
		url:"pt/tutorial/asp/", 
		x:-215, y:-110, z:350, 
		img:"/codigo/logoasp.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutorial Python", 
		texto:"Python é uma linguagem de programação de alto nível, interpretada, de script, imperativa, orientada a objetos, funcional, de tipagem dinâmica e forte.", 
		url:"/pt/tutorial/python/", 
		x:-215, y:-110, z:450, 
		img:"/codigo/logopython.svg"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"tutorial PHP", 
		texto:"PHP é uma linguagem de programação. Usada originalmente apenas para o desenvolvimento no lado do servidor.", 
		url:"/pt/tutorial/php/", 
		x:-215, y:-110, z:550, 
		img:"/codigo/logophp.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Tutorial Apache", 
		texto:"O Servidor HTTP Apache ou Servidor Apache ou HTTP Daemon Apache ou somente Apache, é o servidor web livre criado em 1995 por Rob McCool.", 
		url:"/pt/tutorial/apache/", 
		x:215, y:-110, z:550, 
		img:"/codigo/logoapache.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Banco de Dados", 
		texto:"Bancos de dados ou bases de dados sao conjuntos de arquivos relacionados entre si com registros sobre pessoas, lugares ou coisas.", 
		url:"/pt/tutorial/bancodedados/", 
		x:215, y:-110, z:450, 
		img:"/codigo/bancodedados.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"Ciência de Dados", 
		texto:"Ciencia de dados e uma area interdisciplinar voltada para o estudo e a analise de dados economicos, financeiros e sociais, estruturados e nao-estruturados, que visa a extracao de conhecimento, deteccao de padroes e/ou obtencao de variaveis para possiveis tomadas de decisao.", 
		url:"/pt/tutorial/bancodedados/datascience/", 
		x:215, y:-110, z:350, 
		img:"/codigo/bancodedados.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"O que é CGI", 
		texto:"CGI e um protocolo de comunicacao (um codigo) atraves do qual o servidor HTTP (ou servidor web) intermedia a transferencia de informacoes entre um programa (no mesmo computador que o servidor) e um cliente HTTP (o seu browser).", 
		url:"/pt/tutorial/cgi/", 
		x:215, y:-110, z:250, 
		img:"/logo_vvc.png"}
	dadosMetaVerso.tutorial.links[a++]={
		titulo:"O que é SEO?", 
		texto:"SEO e Otimizacao de Sites e o conjunto de estrategias com o objetivo de potencializar e melhorar o posicionamento de um site nas paginas de resultados naturais nos sites de busca gerando conversoes", 
		url:"/pt/tutorial/seo/", 
		x:215, y:-110, z:150, 
		img:"/codigo/logoseo.jpg"}
	a=0;
	// =Elevador============================================================
	dadosMetaVerso.tutorial.solid[a++]={width:600,height:60, depth:100, x:0, y:40, z:-55};
	dadosMetaVerso.tutorial.solid[a++]={width:250, height:130, depth:100,x:-185,y:40,z:10};
	dadosMetaVerso.tutorial.solid[a++]={width:250, height:130, depth:100,x:185, y:40,z:10};
	// =armarios============================================================
	dadosMetaVerso.tutorial.solid[a++]={width:100, height:25, depth:300, x:-208, y:30, z:80}
	dadosMetaVerso.tutorial.solid[a++]={width:100, height:25, depth:300, x:-208, y:30, z:188}
	dadosMetaVerso.tutorial.solid[a++]={width:100, height:25, depth:300, x:-208, y:30, z:300}
	dadosMetaVerso.tutorial.solid[a++]={width:100, height:25, depth:300, x:-208, y:30, z:405}
	dadosMetaVerso.tutorial.solid[a++]={width:100, height:25, depth:300, x:-208, y:30, z:510}
	dadosMetaVerso.tutorial.solid[a++]={width:100, height:25, depth:300, x:210, y:30, z:510}
	dadosMetaVerso.tutorial.solid[a++]={width:100, height:25, depth:300, x:210, y:30, z:405}
	dadosMetaVerso.tutorial.solid[a++]={width:100, height:25, depth:300, x:210, y:30, z:300}
	dadosMetaVerso.tutorial.solid[a++]={width:100, height:25, depth:300, x:210, y:30, z:188}
	dadosMetaVerso.tutorial.solid[a++]={width:100, height:25, depth:300, x:210, y:30, z:80}
	// =paredes============================================================
	dadosMetaVerso.tutorial.solid[a++]={width:800, height:25, depth:300, x:0, y:30, z:620}
	dadosMetaVerso.tutorial.solid[a++]={width:30, height:800, depth:300, x:-328, y:30, z:300}
	dadosMetaVerso.tutorial.solid[a++]={width:30, height:800, depth:300, x:320, y:30, z:300}
	// =corrimão============================================================
	dadosMetaVerso.tutorial.solid[a++]={width:10, height:400, depth:50, x:-100, y:30, z:420}
	dadosMetaVerso.tutorial.solid[a++]={width:10, height:400, depth:50, x:90, y:30, z:420}

	// =ESCADA===================================================================
	a=0;
	dadosMetaVerso.tutorial.escada[a++]={width:80, height:30, depth:150, x:50, y:-130, z:380, nivel:-130};
	dadosMetaVerso.tutorial.escada[a++]={width:80, height:30, depth:150, x:50, y:-130, z:340, nivel:-100};
	dadosMetaVerso.tutorial.escada[a++]={width:80, height:30, depth:150, x:50, y:-100, z:300, nivel:-80};
	dadosMetaVerso.tutorial.escada[a++]={width:80, height:30, depth:150, x:50, y:-30, z:250, nivel:-60};
	dadosMetaVerso.tutorial.escada[a++]={width:80, height:30, depth:150, x:50, y:-10, z:200, nivel:-30};
	dadosMetaVerso.tutorial.escada[a++]={width:80, height:30, depth:150, x:50, y:0, z:160, nivel:0};

	dadosMetaVerso.tutorial.escada[a++]={width:80, height:30, depth:150, x:-50, y:130, z:380, nivel:130};
	dadosMetaVerso.tutorial.escada[a++]={width:80, height:30, depth:150, x:-50, y:130, z:340, nivel:100};
	dadosMetaVerso.tutorial.escada[a++]={width:80, height:30, depth:150, x:-50, y:100, z:300, nivel:80};
	dadosMetaVerso.tutorial.escada[a++]={width:80, height:30, depth:150, x:-50, y:30, z:250, nivel:60};
	dadosMetaVerso.tutorial.escada[a++]={width:80, height:30, depth:150, x:-50, y:10, z:200, nivel:30};
	dadosMetaVerso.tutorial.escada[a++]={width:80, height:30, depth:150, x:-50, y:0, z:160, nivel:0};
}


function LoadDadeUtil(){
	let a=0;
	dadosMetaVerso.utilitarios.links[a++]={
		titulo:"elevador", 
		texto:"menu", 
		url:"/", 
		x:0, y:40, z:0, img:"/logo_vvc.png"}
	dadosMetaVerso.utilitarios.links[a++]={
		titulo:"Ferramentas", 
		texto:"Aplicações úteis.", 
		url:"/pt/utilitarios/", 
		x:-2, y:40, z:122, 
		img:"/utilitario/veditor3d/botcodigo.png"}
	dadosMetaVerso.utilitarios.links[a++]={
		titulo:"Relogio Digital JS", 
		texto:"Um relogio diital simples, em tempo real. Outro experimento de codigo em JavaScript.", 
		url:"/pt/utilitarios/relogiodigital/", 
		x:38, y:40, z:376, 
		img:"/utilitario/veditor3d/botcodigo.png"}
	dadosMetaVerso.utilitarios.links[a++]={
		titulo:"Relogio Analogico JS", 
		texto:"Um relogio analogico simples, com ponteiros se movendo em tempo real. Outro experimento de codigo em JavaScript.", 
		url:"/pt/utilitarios/relogioanalogico/", 
		x:100, y:40, z:360, 
		img:"/utilitario/veditor3d/botcodigo.png"}
	dadosMetaVerso.utilitarios.links[a++]={
		titulo:"Conversor de Texto JS", 
		texto:"Conversão de textos maiusculos e minusculos. Experimento de codigo em JavaScript.", 
		url:"/pt/utilitarios/conversordetexto/",
		x:-10, y:40, z:400, 
		img:"/utilitario/veditor3d/botcodigo.png"}
	dadosMetaVerso.utilitarios.links[a++]={
		titulo:"Conversor de Unidade JS", 
		texto:"Conversão de medidas de comprimento. Outro experimento de codigo em JavaScript.", 
		url:"/pt/utilitarios/conversordeunidade/", 
		x:158, y:40, z:326, 
		img:"/utilitario/veditor3d/botcodigo.png"}
	dadosMetaVerso.utilitarios.links[a++]={
		titulo:"V-Editor3d", 
		texto:"Crie ambientes 3D, sem digitar nem uma linha de código, que irão rodar em navegadores, sem a necessidade de instalar plugins.", 
		url:"/pt/utilitarios/veditor3d/", 
		x:148, y:40, z:247, 
		img:"/utilitario/veditor3d/veditor3d.png"}
	dadosMetaVerso.utilitarios.links[a++]={
		titulo:"Servicos Gratuitos", 
		texto:"Lista com diversos serviços gratuitos na WEB.", 
		url:"/pt/utilitarios/servicosgratuitos/", 
		x:172, y:40, z:150, 
		img:"/utilitario/veditor3d/botcodigo.png"}
	a=0;
	// =Objeto=Elevador============================================================
	dadosMetaVerso.utilitarios.solid[a++]={width:600,height:60, depth:100, x:0, y:40, z:-55};
	dadosMetaVerso.utilitarios.solid[a++]={width:250, height:130, depth:100,x:-185,y:40,z:10};
	dadosMetaVerso.utilitarios.solid[a++]={width:250, height:130, depth:100,x:185, y:40,z:10};
	// =Objeto=Elevador============================================================
	dadosMetaVerso.utilitarios.solid[a++]={width:600, height:60, depth:100, x:0, y:40, z:520};
	dadosMetaVerso.utilitarios.solid[a++]={width:50, height:500,depth:100,x:-140,y:40,z:200};
	dadosMetaVerso.utilitarios.solid[a++]={width:50, height:500,depth:100, x:360, y:40,z:200};

	// =ESCADA===================================================================
	a=0;
	dadosMetaVerso.utilitarios.escada[a++]={width:50, height:50, depth:50, x:900, y:40, z:900, nivel:0};
}

//= "https://vvcestudio.com.br/static/assetsv5/img" + img;

function LoadDadeDesign(){
	let a=0;
	dadosMetaVerso.design.links[a++]={
		titulo:"elevador", 
		texto:"menu", 
		url:"/", 
		x:0, y:30, z:0, 
		img:"/logo_vvc.png"}
	dadosMetaVerso.design.links[a++]={
		titulo:"VVC Design", 
		texto:"Aqui estão alguns trabalhos realizados pelo Vinícius Valente.", 
		url:"/pt/design/", 
		x:0, y:30, z:145, 
		img:"/logo_vvc.png"}
	dadosMetaVerso.design.links[a++]={
		titulo:"Exposição ilustracao", 
		texto:"Aqui estão alguns trabalhos de ilustração realizados pelo Vinícius Valente.", 
		url:"/pt/design/ilustracao/", 
		x:-266, y:50, z:90, 
		img:"/design/supervia.jpg"}
	dadosMetaVerso.design.links[a++]={
		titulo:"maquete3d", 
		texto:"Aqui estão alguns trabalhos de maquete virtual realizados pelo Vinícius Valente.", 
		url:"/pt/design/maquete3d/", 
		x:-262, y:0, z:203, 
		img:"/design/maquetecentroconvencoes.jpg"}
	dadosMetaVerso.design.links[a++]={
		titulo:"modelagem3d", 
		texto:"Aqui estão alguns trabalhos de modelagem 3D realizados pelo Vinícius Valente.", 
		url:"/pt/design/modelagem3d/", 
		x:-45, y:50, z:340, 
		img:"/design/3dbruchodragao.jpg"}
	dadosMetaVerso.design.links[a++]={
		titulo:"pintura", 
		texto:"Aqui estão algumas pinturas realizados pelo Vinícius Valente.", 
		url:"/pt/design/pintura/", 
		x:68, y:0, z:340, 
		img:"/design/pinturaoleo.jpg"}
	dadosMetaVerso.design.links[a++]={
		titulo:"logo", 
		texto:"Aqui estão algumas logo marcas criadas pelo Vinícius Valente.", 
		url:"/pt/design/logo/", 
		x:190, y:50, z:181, 
		img:"/design/logoatelierlubinah.jpg"}
	dadosMetaVerso.design.links[a++]={
		titulo:"layoutweb", 
		texto:"Aqui estão algumas criações de paginas web criadas pelo Vinícius Valente.", 
		url:"/pt/design/layoutweb/", 
		x:212, y:0, z:95, 
		img:"/design/IDSound.jpg"}
	a=0;
	// =Elevador===================================================================
	dadosMetaVerso.design.solid[a++]={width:600,height:60, depth:300, x:0, y:40, z:-55};
	dadosMetaVerso.design.solid[a++]={width:85, height:120, depth:300,x:-85,y:40,z:10};
	dadosMetaVerso.design.solid[a++]={width:85, height:120, depth:300,x:85, y:40,z:10};
	// =vaos=====================================================================
	dadosMetaVerso.design.solid[a++]={width:50, height:45, depth:500, x:110, y:0, z:245};
	dadosMetaVerso.design.solid[a++]={width:100, height:130, depth:700, x:200, y:0, z:350};
	
	dadosMetaVerso.design.solid[a++]={width:50, height:45, depth:500, x:-105,y:0, z:245};
	dadosMetaVerso.design.solid[a++]={width:100, height:130, depth:700, x:-200,y:0, z:350};
	// =Colunas=====================================================================
	dadosMetaVerso.design.solid[a++]={width:200, height:250, depth:500, x:370, y:0, z:520};
	dadosMetaVerso.design.solid[a++]={width:200, height:250, depth:500, x:-370,y:0, z:520};
	//=Paredes============================================================================
	dadosMetaVerso.design.solid[a++]={width:1100, height:30, depth:210, x:0, y:40, z:690};
	dadosMetaVerso.design.solid[a++]={width:30, height:800, depth:500, x:540, y:40, z:300};
	dadosMetaVerso.design.solid[a++]={width:30, height:800, depth:500, x:-540,y:40, z:300};

	// =ESCADA=(x:lado/z:frente/y:altura)================================================
	a=0;
	//entrada
	dadosMetaVerso.design.escada[a++]={width:100, height:100, depth:80, x:0, y:0, z:135, nivel:0};
	
	// frente 
	dadosMetaVerso.design.escada[a++]={width:300, height:300, depth:100, x:160, y:-40, z:450, nivel:-30}; // descendo
	dadosMetaVerso.design.escada[a++]={width:60, height:40, depth:100, x:30, y:0, z:250, nivel:-15};
	dadosMetaVerso.design.escada[a++]={width:300, height:300, depth:100, x:-160, y:40, z:450, nivel:30}; // subindo
	dadosMetaVerso.design.escada[a++]={width:60, height:40, depth:100, x:-50, y:0, z:250, nivel:15}; 
	
	// esquerdda
	dadosMetaVerso.design.escada[a++]={width:250, height:150, depth:100, x:-350, y:-20, z:215, nivel:-30}; //descendo
	dadosMetaVerso.design.escada[a++]={width:40, height:60, depth:100, x:-100, y:0, z:170, nivel:-15};
	dadosMetaVerso.design.escada[a++]={width:250, height:150, depth:100, x:-350, y:20, z:50, nivel:30}; // subindo
	dadosMetaVerso.design.escada[a++]={width:40, height:60, depth:100, x:-100, y:0, z:100, nivel:15}; 
	// direita
	dadosMetaVerso.design.escada[a++]={width:250, height:150, depth:100, x:350, y:-20, z:50, nivel:-30}; //descendo
	dadosMetaVerso.design.escada[a++]={width:40, height:60, depth:100, x:100, y:0, z:100, nivel:-15};		
	dadosMetaVerso.design.escada[a++]={width:250, height:150, depth:100, x:350, y:20, z:215, nivel:30}; // subindo
	dadosMetaVerso.design.escada[a++]={width:40, height:60, depth:100, x:100, y:0, z:170, nivel:15}; 
}

//= "https://vvcestudio.com.br/static/assetsv5/img" + img;

function LoadDadeJogos(){
	let a=0;
	dadosMetaVerso.jogos.links[a++]={
		titulo:"elevador", 
		texto:"menu", 
		url:"/", 
		x:0, y:30, z:0, 
		img:"/logo_vvc.png"};
	dadosMetaVerso.jogos.links[a++]={
		titulo:"Jogos", 
		texto:"Alguns Jogos de teste de desenvolvimento.", 
		url:"/pt/game/", 
		x:-3, y:30, z:122, 
		img:"/logo_vvc.png"};
	dadosMetaVerso.jogos.links[a++]={
		titulo:"Jogo CristalBot", 
		texto:"Jogo Cristal Bot desenvolvido na Unity com C# modelagem 3D no Blender. Desenvolvi tanto o codigo quanto a arte do jogo.", 
		url:"/pt/game/cristalbot/", 
		x:77, y:30, z:167, 
		img:"/cristalbot/logocistalbotmini.png"};
	dadosMetaVerso.jogos.links[a++]={
		titulo:"Jogo Omelete de Dino", 
		texto:"Estudo de desenvolvimento de game apenas com JS e canvas. Fuja de T-rex e colete ovos de dinosauro para seu omelete.", 
		url:"/pt/game/omeletededino/", 
		x:145, y:30, z:200, 
		img:"/game/omeletededino/logo.png"};
	dadosMetaVerso.jogos.links[a++]={
		titulo:"Jogo Sonic", 
		texto:"Colete os aneis e fuja do Robotinic. Estudo de desenvolvimento de game apenas com JS e canvas.", 
		url:"/pt/game/sonic/", 
		x:145, y:30, z:300, 
		img:"/game/sonic/logo.png"};
	dadosMetaVerso.jogos.links[a++]={
		titulo:"Jogo Tanque",
		texto:"Estudo de desenvolvimento de game para Web com a biblioteca PhaserJS. Controle de um tanque em vista superior.", 
		url:"/pt/game/tanque/", 
		x:156, y:30, z:408, 
		img:"/codigo/logophanzerjs.png"};
	dadosMetaVerso.jogos.links[a++]={
		titulo:"Jogo Cobrinha",
		texto:"Estudo de desenvolvimento de game apenas com JS e canvas. Classico jogo da cobrinha.", 
		url:"/pt/game/cobrinha/", 
		x:81, y:30, z:433, 
		img:"/game/cobrinha/imgcobra.jpg"};
	dadosMetaVerso.jogos.links[a++]={
		titulo:"Jogo Cobrinha 3D",
		texto:"Desenvolvimento de game 3D apenas com JS e canvas. Jogo da cobrinha, versao 3D.", 
		url:"/pt/game/cobrinha3d/", 
		x:-82, y:30, z:440, 
		img:"/game/cobrinha/imgcobra.jpg"};
	dadosMetaVerso.jogos.links[a++]={
		titulo:"Jogo Tetris",
		texto:"Desenvolvimento de game 3D apenas com JS e canvas. Classico jogo Tetris.", 
		url:"/pt/game/tetris/", 
		x:-141, y:30, z:408, 
		img:"/game/tetris/logotetris1987.png"};
	dadosMetaVerso.jogos.links[a++]={
		titulo:"Jogo Tetris 3D", 
		texto:"Estudo de desenvolvimento de game apenas com JS e canvas. Jogo Tetris versão retro.", 
		url:"/pt/game/tetris3d/", 
		x:-148, y:30, z:300, 
		img:"/game/tetris3d/tetris3dlogo.png"};
	dadosMetaVerso.jogos.links[a++]={
		titulo:"Jogo wolfenstein 3d", 
		texto:"Estudo de desenvolvimento de game 3D apenas com JS.", 
		url:"/pt/game/wolf/", 
		x:-155, y:30, z:200, 
		img:"/wolfvvc/wolfenweaponex.jpg"};
	dadosMetaVerso.jogos.links[a++]={
		titulo:"Jogos Educativos", 
		texto:"APP educativo para auxiliar o aprendizado da leitura. Instale fonemas sons na mente do pequeno.", 
		url:"/pt/game/edu/letras", 
		x:-84, y:30, z:167, 
		img:"/game/edu/letras/logo_letras.jpg"};
	a=0;
	// =Elevador============================================================
	dadosMetaVerso.jogos.solid[a++]={width:500,height:60, depth:100, x:0, y:40, z:-55};
	dadosMetaVerso.jogos.solid[a++]={width:250, height:130, depth:100,x:-185,y:40,z:10};
	dadosMetaVerso.jogos.solid[a++]={width:250, height:130, depth:100,x:185, y:40,z:10};
	// =Paredes============================================================
	dadosMetaVerso.jogos.solid[a++]={width:400, height:60, depth:100, x:0,  y:40, z:500};
	//dadosMetaVerso.jogos.solid[a++]={width:50, height:420, depth:100,x:-230,y:40, z:280};
	dadosMetaVerso.jogos.solid[a++]={width:50, height:420, depth:100, x:230, y:40,z:280};
	
	// =ESCADA===================================================================
	a=0;
	dadosMetaVerso.jogos.escada[a++]={width:50, height:50, depth:50, x:900, y:40, z:900, nivel:0};
}

//= "https://vvcestudio.com.br/static/assetsv5/img" + img;

function LoadDadeHome(){
	let a=0;
	dadosMetaVerso.home.links[a++]={
		titulo:"elevador", 
		texto:"menu", 
		url:"/", 
		x:0, y:30, z:0, 
		img:"/logo_vvc.png"}
	dadosMetaVerso.home.links[a++]={
		titulo:"Home", 
		texto:"Bem vindo ao VVC Estudio.", 
		url:"/", 
		x:0, y:30, z:417, 
		img:"/logo_vvc.png"}
	a=0;
	// =Elevador===================================================================
	dadosMetaVerso.home.solid[a++]={width:600,height:60, depth:100, x:0, y:40, z:-55};
	dadosMetaVerso.home.solid[a++]={width:85, height:130, depth:100,x:-85,y:40,z:10};
	dadosMetaVerso.home.solid[a++]={width:85, height:130, depth:100,x:85, y:40,z:10};
	// =Colunas=====================================================================
	dadosMetaVerso.home.solid[a++]={width:50, height:50, depth:100, x:103, y:40, z:327};
	dadosMetaVerso.home.solid[a++]={width:50, height:50, depth:100, x:-103,y:40, z:327};
	dadosMetaVerso.home.solid[a++]={width:50, height:50, depth:100, x:105, y:40, z:199};
	dadosMetaVerso.home.solid[a++]={width:50, height:50, depth:100, x:-105,y:40, z:199};
	// =Paredes=Frente==============================================================
	dadosMetaVerso.home.solid[a++]={width:110, height:40, depth:100, x: 132, y:40, z:526};
	dadosMetaVerso.home.solid[a++]={width:110, height:40, depth:100, x:-132, y:40, z:526};
	// =Paredes=Laterais============================================================
	dadosMetaVerso.home.solid[a++]={width:300, height:600, depth:100, x:343, y:40, z:217};
	dadosMetaVerso.home.solid[a++]={width:300, height:600, depth:100, x:-343,y:40, z:217};
	// =Predios============================================================
	dadosMetaVerso.home.solid[a++]={width:1000, height:50, depth:100, x:0, y:40, z:1000};
	dadosMetaVerso.home.solid[a++]={width:50, height:600, depth:100, x:500, y:40, z:700};
	dadosMetaVerso.home.solid[a++]={width:50, height:600, depth:100, x:-500,y:40, z:700};

	// =ESCADA===================================================================
	a=0;
	dadosMetaVerso.home.escada[a++]={width:100, height:20, depth:50, x:0, y:10, z:520, nivel:0 };
	dadosMetaVerso.home.escada[a++]={width:100, height:10, depth:50, x:0, y:0, z:540, nivel:-10 };
	dadosMetaVerso.home.escada[a++]={width:100, height:10, depth:50, x:0, y:-10, z:550, nivel:-20 };
	dadosMetaVerso.home.escada[a++]={width:100, height:20, depth:50, x:0, y:-20, z:570, nivel:-30 };
}

function LoadDadeEu(){
	let a=0;
	dadosMetaVerso.eu.links[a++]={
		titulo:"elevador", 
		texto:"menu", 
		url:"/", 
		x:0, y:30, z:0, 
		img:"/logo_vvc.png"};
	dadosMetaVerso.eu.links[a++]={
		titulo:"Eu", 
		texto:"Meu nome e Vinicius Valente Coutinho, Analista de Sistemas fullstack, com experiencia em configuracao de CDN, Apache, AMP, SEO, NodeJS, PHP, Hadoop.",  
		url:"/pt/eu/", 
		x:0, y:30, z:97, 
		img:"/eu.png" };
	dadosMetaVerso.eu.links[a++]={
		titulo:"Meu curriculo", 
		texto:"Atualmente na equipe de Arquitetura de Data Analytics. Atuei como lider de equipe de desenvolvimento de projeto de BigData, lider de equipe em projeto AMP com foco em melhoria do SEO.", 
		url:"/pt/eu/curriculo/", 
		x:-2, y:30, z:220, 
		img:"/eu.png"};
	a=0;
	
	// =Elevador============================================================
	dadosMetaVerso.eu.solid[a++]={width:500,height:60, depth:100, x:0, y:40, z:-55};
	dadosMetaVerso.eu.solid[a++]={width:85, height:130, depth:100,x:-85,y:40,z:10};
	dadosMetaVerso.eu.solid[a++]={width:85, height:130, depth:100,x:85, y:40,z:10};
	// =Paredes============================================================
	dadosMetaVerso.eu.solid[a++]={width:400, height:60, depth:100, x:0,  y:40, z:400};
	dadosMetaVerso.eu.solid[a++]={width:50, height:400, depth:100,x:-130,y:40, z:200};
	dadosMetaVerso.eu.solid[a++]={width:50, height:400, depth:100, x:130, y:40,z:200};
	
	// =ESCADA===================================================================
	a=0;
	dadosMetaVerso.eu.escada[a++]={width:50, height:50, depth:50, x:900, y:40, z:900, nivel:0};
}

var loader 
function gerandoLinks(){
	console.log("gerandoLinks()")
	loader = new THREE.TextureLoader();
	for (let i in dadosMetaVerso[andarAtual].links) {
		const urlImgMat1 = loader.load('https://vvcestudio.vercel.app/static/assetsv5/img/wolfvvc/matwolfvvc012.jpg');
		dadosMetaVerso[andarAtual].links[i].spriteImg = loader.load("http://vvcestudio.com.br/static/assetsv5/img"+dadosMetaVerso[andarAtual].links[i].img);
		dadosMetaVerso[andarAtual].links[i].spriteMat = new THREE.SpriteMaterial( { map: dadosMetaVerso[andarAtual].links[i].spriteImg, color: 0xffffff } ); // Ilumicacao (cenario)
		dadosMetaVerso[andarAtual].links[i].sprite = new THREE.Sprite( dadosMetaVerso[andarAtual].links[i].spriteMat );			 	
		dadosMetaVerso[andarAtual].links[i].sprite.position.x = dadosMetaVerso[andarAtual].links[i].x;
		dadosMetaVerso[andarAtual].links[i].sprite.position.y = dadosMetaVerso[andarAtual].links[i].y;
		dadosMetaVerso[andarAtual].links[i].sprite.position.z = dadosMetaVerso[andarAtual].links[i].z;
		dadosMetaVerso[andarAtual].links[i].sprite.scale.set(25, 25, 0);
		scene.add(dadosMetaVerso[andarAtual].links[i].sprite);
	}
}

function mostrarSprits(){
	console.log("mostrarSprits()")
	for (let i in dadosMetaVerso[andarAtual].links) {
		scene.add(dadosMetaVerso[andarAtual].links[i].sprite);
	}
}

function esconderSprits(){
	console.log("esconderSprits()")
	for (let i in dadosMetaVerso[andarAtual].links) {
		scene.remove(dadosMetaVerso[andarAtual].links[i].sprite);
	}
}

function gerandoBlocos(){
	console.log("gerandoBlocos()");
	for (let i in dadosMetaVerso[andarAtual].solid) {
		geometry[i] = new THREE.BoxGeometry(dadosMetaVerso[andarAtual].solid[i].width, dadosMetaVerso[andarAtual].solid[i].depth, dadosMetaVerso[andarAtual].solid[i].height);
		listObjEmCena[i] = new THREE.Mesh( geometry[i], material[11] );
		scene.add(listObjEmCena[i]);
		listObjEmCena[i].position.x = dadosMetaVerso[andarAtual].solid[i].x;
		listObjEmCena[i].position.y = dadosMetaVerso[andarAtual].solid[i].y;
		listObjEmCena[i].position.z = dadosMetaVerso[andarAtual].solid[i].z;
	}
	for (let b in dadosMetaVerso[andarAtual].escada) {
		geometry[b+i] = new THREE.BoxGeometry(dadosMetaVerso[andarAtual].escada[b].width, dadosMetaVerso[andarAtual].escada[b].depth, dadosMetaVerso[andarAtual].escada[b].height);
		listObjEmCena[b+i] = new THREE.Mesh( geometry[b+i], material[4] );
		scene.add(listObjEmCena[b+i]);
		listObjEmCena[b+i].position.x = dadosMetaVerso[andarAtual].escada[b].x;
		listObjEmCena[b+i].position.y = dadosMetaVerso[andarAtual].escada[b].y;
		listObjEmCena[b+i].position.z = dadosMetaVerso[andarAtual].escada[b].z;
	}
}


function init(){
	renderer.shadowMap.enabled = true;
	renderer.shadowMap.type = THREE.PCFSoftShadowMap; // default THREE.PCFShadowMap
	DivIntroA.style.display = "none"; //Esconder Janela de Informacões.
	DivIntroload.style.display = "center"; //Esconder Janela de Informacões.
	scene = new THREE.Scene();

	// Nevoeiro ==================================
	scene.background = new THREE.Color(0xf0f0f0);
	//scene.background = new THREE.Color(0xcce0ff);
	scene.fog = new THREE.Fog(0xffffff, 1, 1000);
	// Nevoeiro ==================================

	initMaterial()

	// Camera
	camera = new THREE.PerspectiveCamera( 50, largura / altura, 1, pixel3d*10000 );
	scene.add(camera);
	camera.position.x = -80;
	camera.position.y = 80;
	camera.position.z = 280;
	//camera.rotation.x = -0.45;
	//camera.rotation.y = -0.45;
	//camera.rotation.z = -0.24;

	initLight();

	renderer.setSize(largura,altura);
	document.body.appendChild( renderer.domElement );
	document.addEventListener("keydown", keyPush);
	
	//===================================================================================
	initPlayer();
	initElevador();
	//initSalaGames();
	//initSalaTutorial();
	initSalaHome();
	//initSalaEu();
	//initSalaDesign();
	//initSalaUtil();
	initFocoCamera()

	//gerandos();
	
	idSpanDados1 = document.getElementById("idSpanDados1")
	idSpanDados2 = document.getElementById("idSpanDados2")
	idSpanDados3 = document.getElementById("idSpanDados3")
	idSpanTitulo = document.getElementById("idSpanTitulo")
	idSpanTexto = document.getElementById("idSpanTexto")
	idSpanURL = document.getElementById("idSpanURL")
	idEvador = document.getElementById("idEvador")
	idPagina = document.getElementById("idPagina")
	idImgPage = document.getElementById("idImgPage")
	idLinkURL = document.getElementById("idLinkURL")

	initJoystick()

	//camera.lookAt( listObjEmCena[7].position ); // Manter foco da camera no bloco branco
};

function sairDoAndar(varAndarAtual){
	esconderSprits()
	if(varAndarAtual=="design"){
		scene.remove(dadosMetaVerso.design.objeto3D);
	}else if(varAndarAtual=="eu"){
		scene.remove(dadosMetaVerso.eu.objeto3D);
	}else if(varAndarAtual=="home"){
		scene.remove(dadosMetaVerso.home.objeto3D);
	}else if(varAndarAtual=="jogos"){
		scene.remove(dadosMetaVerso.jogos.objeto3D);
	}else if(varAndarAtual=="tutorial"){
		scene.remove(dadosMetaVerso.tutorial.objeto3D);
	}else if(varAndarAtual=="utilitarios"){
		scene.remove(dadosMetaVerso.utilitarios.objeto3D);
	}
}

function initFocoCamera(){
	var geometryfoco = new THREE.BoxGeometry(1, 1, 1);
	dadosMetaVerso.focoCamera = new THREE.Mesh( geometryfoco, material[1] );
	//scene.add(dadosMetaVerso.focoCamera); //Não mostra o foco.
}

function initPlayer(){
	// player 1a pessoa
	if(dadosMetaVerso.maos.carrega==false){
		dadosMetaVerso.maos.carrega=true;
		let loaderObj3D = new THREE.GLTFLoader();  //O ERRO COM ISSO, TENTEI SEM THREE. USANDO APENAS O GLTLOADER() MAS NaO FUNCIONOU 
		loaderObj3D.load( dadosMetaVerso.maos.url, function ( gltf ) {	
			console.log("carregou arquivo 2 GLT. Player 1a pessoa (maos)");
			//listObjEmCena[9] = gltf.scene; 
			dadosMetaVerso.maos.objeto3D = gltf.scene; 
			
			//Como aplicar material aos objetos?========================================================
			//dadosMetaVerso.maos.objeto3D.children[0].geometry = texture; //?
			//dadosMetaVerso.maos.objeto3D.children[0].material.map = texture; //?
			//dadosMetaVerso.maos.material.map = texture; //?
			//==========================================================================================
			
			//iniciar player em x=-1, y=0, z=697 no terreo
			dadosMetaVerso.maos.objeto3D.position.x = -1;
			dadosMetaVerso.maos.objeto3D.position.y = 0;
			dadosMetaVerso.maos.objeto3D.position.z = 697;
			
			/*
			var obj = [];
			const groupMaos = new THREE.Group();	
			obj[0] = new THREE.Mesh(gltf.scene.children[0].geometry, material[1]); // Braco1 
			obj[1] = new THREE.Mesh(gltf.scene.children[1].geometry, material[1]); // Braco2 
			groupMaos.add(obj[0]);
			groupMaos.add(obj[1]);
			groupMaos.position.y = groupMaos.position.y+30;
			listObjEmCena[11] = groupMaos; 
			*/
			scene.add(dadosMetaVerso.maos.objeto3D);
			rotacionar(2.5);
			fimCarga();
			//renderizar();
		});	
	}
}

function initElevador(){
	// elevador
	if(dadosMetaVerso.elevador.carrega==false){
		dadosMetaVerso.elevador.carrega=true;
		let loaderObj3D2 = new THREE.GLTFLoader();  
		loaderObj3D2.load( dadosMetaVerso.elevador.url, function ( gltf ) {	
			console.log("carregou arquivo 2 GLT elevador");	 	
			dadosMetaVerso.elevador.objeto3D = new THREE.Mesh(gltf.scene.children[0].geometry, material[5]);
			//listObjEmCena[10] = new THREE.Mesh(gltf.scene.children[0].geometry, material[1]); // Braco1 
			//scene.add(listObjEmCena[10]);
			dadosMetaVerso.elevador.objeto3D.castShadow = true; //default is false
			dadosMetaVerso.elevador.objeto3D.receiveShadow = false; //default
			scene.add(dadosMetaVerso.elevador.objeto3D);
			fimCarga();
			//renderizar();
		});
	}
}

function initSalaGames(){
	// sala de Jogos
	if(andarAtual!="jogos"){
		sairDoAndar(andarAtual);
		andarAtual="jogos";
		if(dadosMetaVerso.jogos.carrega==false){
			LoadDadeJogos()
			dadosMetaVerso.jogos.carrega=true;
			let loaderObj3D3 = new THREE.GLTFLoader();
			loaderObj3D3.load( dadosMetaVerso.jogos.url, function ( gltf ) {	
				console.log("carregou arquivo 2 GLT sala_design");
				//listObjEmCena[12] = new THREE.Mesh(gltf.scene.children[0].geometry, material[1]); // Braco1 
				//listObjEmCena[12] = gltf.scene; 
				dadosMetaVerso.jogos.objeto3D = gltf.scene;
				//scene.add(listObjEmCena[12]);
				scene.add(dadosMetaVerso.jogos.objeto3D);
				//gerandoBlocos();
				gerandoLinks();
				fimCarga();
				//renderizar();
			});
		}else{
			mostrarSprits();
			scene.add(dadosMetaVerso.jogos.objeto3D);
		}
	}

}

function initSalaTutorial(){
	// sala de Tutorial (Biblioteca)
	if(andarAtual!="tutorial"){
		sairDoAndar(andarAtual);
		andarAtual="tutorial";
		if(dadosMetaVerso.tutorial.carrega==false){
			LoadDadeTutorial();
			dadosMetaVerso.tutorial.carrega=true;
			let loaderObj3D3 = new THREE.GLTFLoader(); 
			loaderObj3D3.load( dadosMetaVerso.tutorial.url, function ( gltf ) {	
				console.log("carregou arquivo 2 GLT sala_design");
				dadosMetaVerso.tutorial.objeto3D = gltf.scene;
				scene.add(dadosMetaVerso.tutorial.objeto3D);
				//gerandoBlocos();
				gerandoLinks();
				fimCarga();
			});
		}else{
			mostrarSprits();
			scene.add(dadosMetaVerso.tutorial.objeto3D);
		}		
	}
	
}


function initSalaUtil(){
	// sala de Eu (Diretoria)
	if(andarAtual!="utilitarios"){
		sairDoAndar(andarAtual);
		andarAtual="utilitarios";
		if(dadosMetaVerso.utilitarios.carrega==false){
			dadosMetaVerso.utilitarios.carrega=true;
			LoadDadeUtil();
			let loaderObj3D3 = new THREE.GLTFLoader(); 
			loaderObj3D3.load( dadosMetaVerso.utilitarios.url, function ( gltf ) {	
				console.log("carregou arquivo 2 GLT sala_design");
				dadosMetaVerso.utilitarios.objeto3D = gltf.scene;
				scene.add(dadosMetaVerso.utilitarios.objeto3D);
				//gerandoBlocos();
				gerandoLinks();
				fimCarga();
			});
		}else{
			mostrarSprits();
			scene.add(dadosMetaVerso.utilitarios.objeto3D);
		}
	}

}

function initSalaEu(){
	// sala de Eu (Diretoria)
	if(andarAtual!="eu"){
		sairDoAndar(andarAtual);
		andarAtual="eu";
		if(dadosMetaVerso.eu.carrega==false){
			dadosMetaVerso.eu.carrega=true;
			LoadDadeEu();
			let loaderObj3D3 = new THREE.GLTFLoader(); 
			loaderObj3D3.load( dadosMetaVerso.eu.url, function ( gltf ) {	
				console.log("carregou arquivo 2 GLT sala_design");
				dadosMetaVerso.eu.objeto3D = gltf.scene;
				scene.add(dadosMetaVerso.eu.objeto3D);
				//gerandoBlocos();
				gerandoLinks();
				fimCarga();
			});
		}else{
			mostrarSprits();
			scene.add(dadosMetaVerso.eu.objeto3D);
		}
	}
}

function initSalaHome(){
	// sala de home (terreo)
	if(andarAtual!="home"){
		if(dadosMetaVerso.home.carrega==false){
			andarAtual="home";
			dadosMetaVerso.home.carrega=true;
			LoadDadeHome();
			let loaderObj3D3 = new THREE.GLTFLoader(); 
			loaderObj3D3.load( dadosMetaVerso.home.url, function ( gltf ) {	
				console.log("carregou arquivo 2 GLT sala_design");
				dadosMetaVerso.home.objeto3D = gltf.scene;
				scene.add(dadosMetaVerso.home.objeto3D);
				//gerandoBlocos();
				gerandoLinks();
				fimCarga();
			});
		}else{
			sairDoAndar(andarAtual);
			andarAtual="home";
			mostrarSprits();
			scene.add(dadosMetaVerso.home.objeto3D);
		}
	}
}

function initSalaDesign(){
	// sala de home (terreo)
	if(andarAtual!="design"){
		sairDoAndar(andarAtual);
		andarAtual="design";
		if(dadosMetaVerso.design.carrega==false){
			dadosMetaVerso.design.carrega=true;
			LoadDadeDesign();
			let loaderObj3D3 = new THREE.GLTFLoader(); 
			loaderObj3D3.load( dadosMetaVerso.design.url, function ( gltf ) {	
				console.log("carregou arquivo 2 GLT sala_design");
				dadosMetaVerso.design.objeto3D = gltf.scene;
				dadosMetaVerso.design.objeto3D.position.y = -15;
				scene.add(dadosMetaVerso.design.objeto3D);
				//gerandoBlocos();
				gerandoLinks();
				fimCarga();
			});
		}else{
			mostrarSprits();
			scene.add(dadosMetaVerso.design.objeto3D);
		}
	}

}

function fimCarga(){
	carregando++;
	if(carregando>=3){
		DivIntro.style.display = "none"; //Esconder Janela de Informacoes.
		animate();
	}
}

function animate() {
    if(contJanela>0){
		contJanela=contJanela-1;
	}
	requestAnimationFrame( animate ); //Chamar esta funcao novamente quando terminar.
    renderizar();
}



function renderizar(){
	camera.lookAt( dadosMetaVerso.focoCamera.position ); // Manter foco da camera no bloco branco
	idSpanDados1.textContent="PLayer: x="+dadosMetaVerso.maos.objeto3D.position.x + ", y=" + dadosMetaVerso.maos.objeto3D.position.y + ", z=" + dadosMetaVerso.maos.objeto3D.position.z; 
	idSpanDados2.textContent="Sene:"+andarAtual+", angulo:"+angulo;
	idSpanDados3.textContent="focox:"+fococamera.x+", focoz:"+fococamera.z+", ladox:"+fococamera.ladox+", ladoz:"+fococamera.ladoz;
	renderer.render(scene, camera);
}

function keyPush(e) {
    //Acoes do teclado.
    var varKey = e.key;
    var varkeyCode = e.keyCode
    if (varkeyCode === 37 || varkeyCode === 65 || varKey == "ArrowLeft") {
      //console.log("37=(<)esquerda / 65=a"); 
	  rotacionar(0.25);
    } else if (varkeyCode === 39 || varkeyCode === 68 || varKey == "ArrowRight") {
      //console.log("39=(>)Direita / 68=d");
      rotacionar(-0.25); 
    } else if (varkeyCode === 40 || varkeyCode === 83 || varKey == "ArrowDown") {
      //console.log("40=seta pra baixo / 83=s"); ("re"); //"descer"
	  moverPersonagem(1);
	} else if (varkeyCode === 87 || varkeyCode === 38 || varKey == "ArrowUp") {
      //console.log("30=seta pra cima / 87=w"); ("frente"); //"subir"
      moverPersonagem(-1);
	} else if (varkeyCode === 81 || varKey == "q") {
      //varkeyCode:81 | varKey:q // mover de lado
	  moverPersonLado(-1);
	} else if (varkeyCode === 69 || varKey == "e") {
	  //varkeyCode:69 | varKey:e // mover de lado
      moverPersonLado(1);
	} else if (varkeyCode === 17 || varKey == "Control") {
	  //varkeyCode:17 | varKey:Control
      atirar();
	} else if (varkeyCode === 82 || varKey == "r") {
	  olhar(+1);
	  //moverPersonagem("subir");	//voar/subir/pular  
    } else if (varkeyCode === 70 || varKey == "f") {
	  olhar(-1);
	  //moverPersonagem("descer"); //descer/abaixar
	} else if (varkeyCode === 32 || varKey == " ") {
	  //moverPersonagem("pula"); //descer/abaixar 
    } else{
	  console.log("varkeyCode:"+varkeyCode+" | varKey:"+varKey);
	}
  }

 var atirando = 0;
 
 function atirar(){
	atirando=2;
	//renderizar();
 }

/*
function colidBox2d(rect1, rect2){
  if(rect1.x+rect1.width/2 > rect2.x-rect2.width/2 &&
	rect1.x-rect1.width/2 < rect2.x+rect2.width/2 &&
	rect1.z+rect1.width/2 > rect2.y-rect2.width/2 &&
	rect1.y-rect1.width/2 < rect2.y+rect2.width/2){
	//tocou
	//console.log("tocou");
	return true;
  } 
  //nao tocou
  return false;
}
*/

function colidBox3d(rect1, rect2){
  //console.log("colidBox3d(x="+rect1.x+",z="+rect1.z+",w="+rect1.width+",h="+rect1.height+",d="+rect1.depth);
  //x largura
  //y altura
  //z profundidade
  /*
  if(rect1.x+rect1.width/2 > rect2.x-rect2.width/2 &&
	rect1.x-rect1.width/2 < rect2.x+rect2.width/2 &&
	rect1.y+rect1.height/2 > rect2.y-rect2.height/2 &&
	rect1.y-rect1.height/2 < rect2.y+rect2.height/2 &&
	rect1.z+rect1.depth/2 > rect2.z-rect2.depth/2 &&
	rect1.z-rect1.depth/2 < rect2.z+rect2.depth/2
	)
  */
  if(rect1.x+rect1.width/2 > rect2.x-rect2.width/2 &&
	rect1.x-rect1.width/2 < rect2.x+rect2.width/2 &&
	rect1.y+rect1.depth/2 > rect2.y-rect2.depth/2 &&
	rect1.y-rect1.depth/2 < rect2.y+rect2.depth/2 &&
	rect1.z+rect1.height/2 > rect2.z-rect2.height/2 &&
	rect1.z-rect1.height/2 < rect2.z+rect2.height/2
	){
	//tocou
	//console.log("!!!!!!!!!! tocou !!!!!!!!!!!!!!");
	return true;
  } 
  //nao tocou
  return false;
}

function colideForObjetos(){
	for (var i in dadosMetaVerso[andarAtual].solid) {
		if(colidBox3d(
				{
				"x":dadosMetaVerso[andarAtual].solid[i].x,
				"y":dadosMetaVerso[andarAtual].solid[i].y,
				"z":dadosMetaVerso[andarAtual].solid[i].z, 
				"width":dadosMetaVerso[andarAtual].solid[i].width, 
				"height":dadosMetaVerso[andarAtual].solid[i].height,
				"depth":dadosMetaVerso[andarAtual].solid[i].depth
				},
				{
				"x":dadosMetaVerso.maos.objeto3D.position.x,
				"y":dadosMetaVerso.maos.objeto3D.position.y,
				"z":dadosMetaVerso.maos.objeto3D.position.z, 
				"width":25, 
				"height":25,
				"depth":50
				}
			)){
			return true;
			break;
		}
	}

	// verificar se esta em uma escada.
	for (var b in dadosMetaVerso[andarAtual].escada) {
		if(colidBox3d(
				{
				"x":dadosMetaVerso[andarAtual].escada[b].x,
				"y":dadosMetaVerso[andarAtual].escada[b].y,
				"z":dadosMetaVerso[andarAtual].escada[b].z, 
				"width":dadosMetaVerso[andarAtual].escada[b].width, 
				"height":dadosMetaVerso[andarAtual].escada[b].height,
				"depth":dadosMetaVerso[andarAtual].escada[b].depth
				},
				{
				"x":dadosMetaVerso.maos.objeto3D.position.x,
				"y":dadosMetaVerso.maos.objeto3D.position.y,
				"z":dadosMetaVerso.maos.objeto3D.position.z, 
				"width":25, 
				"height":25,
				"depth":50
				}
			)){
			dadosMetaVerso.maos.objeto3D.position.y = dadosMetaVerso[andarAtual].escada[b].nivel;
			break;
		}
	}

	return false;
}


function colideAction(){
	//var respTocou = {titulo:"",url:"",img:""};
	for (var i in dadosMetaVerso[andarAtual].links) {
		if(colidBox3d(
				{
				"x":dadosMetaVerso[andarAtual].links[i].x,
				"y":dadosMetaVerso[andarAtual].links[i].y,
				"z":dadosMetaVerso[andarAtual].links[i].z, 
				"width":50, 
				"height":50,
				"depth":50
				},
				{
				"x":dadosMetaVerso.maos.objeto3D.position.x,
				"y":dadosMetaVerso.maos.objeto3D.position.y,
				"z":dadosMetaVerso.maos.objeto3D.position.z, 
				"width":50, 
				"height":50,
				"depth":50
				}
		)){
			return {titulo:dadosMetaVerso[andarAtual].links[i].titulo,url:"http://vvcestudio.com.br"+dadosMetaVerso[andarAtual].links[i].url,img:"http://vvcestudio.com.br/static/assetsv5/img"+dadosMetaVerso[andarAtual].links[i].img,texto:dadosMetaVerso[andarAtual].links[i].texto};
			//i=dadosMetaVerso[andarAtual].links.ength;
			break;
		}
	}
	return {titulo:"",url:"",texto:""};
}


function rotacionar(varRot){
	// varRot = -1 ou +1
	const limite = 5;
	if(fococamera.z<=0 && fococamera.x<=0 && fococamera.z>=-5 && fococamera.x>=-5){
		fococamera.z = fococamera.z-varRot
		fococamera.x = fococamera.x+varRot
		//lado	
		fococamera.ladoz = fococamera.ladoz+varRot
		fococamera.ladox = fococamera.ladox+varRot		
	} else if(fococamera.z<=0 && fococamera.x>=0 && fococamera.z>=-5 && fococamera.x<=5){
		fococamera.z = fococamera.z+varRot
		fococamera.x = fococamera.x+varRot
		//lado
		fococamera.ladoz = fococamera.ladoz+varRot
		fococamera.ladox = fococamera.ladox-varRot
	} else if(fococamera.z>=0 && fococamera.x>=0 && fococamera.z<=5 && fococamera.x<=5){
		fococamera.z = fococamera.z+varRot
		fococamera.x = fococamera.x-varRot
		//lado
		fococamera.ladoz = fococamera.ladoz-varRot
		fococamera.ladox = fococamera.ladox-varRot
	} else if(fococamera.z>=0 && fococamera.x<=0 && fococamera.z<=5 && fococamera.x>=-5){
		fococamera.z = fococamera.z-varRot
		fococamera.x = fococamera.x-varRot
		//ladoz	
		fococamera.ladoz = fococamera.ladoz-varRot
		fococamera.ladox = fococamera.ladox+varRot
	}
	if(fococamera.z<-5){
		fococamera.z=-4;
	}else if(fococamera.z>5){
		fococamera.z=4;
	}
	if(fococamera.ladoz<-5){
		fococamera.ladoz=-4;
	}else if(fococamera.ladoz>5){
		fococamera.ladoz=4;
	}
	if(fococamera.x<-5){
		fococamera.x=-4;
	}else if(fococamera.x>5){
		fococamera.x=4;
	}
	if(fococamera.ladox<-5){
		fococamera.ladox=-4;
	}else if(fococamera.ladox>5){
		fococamera.ladox=4;
	}

	angulo = Math.atan2(fococamera.z, fococamera.x); // Calcula o radiano de um vetor 2D iniciado em 0,0.

	/*
	angulo = angulo+(varRot*0.19634375) // angulo = angulo+(varRot*0.75)
	//if(angulo>3.70){
	if(angulo>3.1416){
		angulo = -3.1415 // antigo "-2.25"
	//}else if(angulo<-2.25){
	}else if(angulo<-3.1416){
		angulo = 3.1415; //antigo "3"
	}
	*/

	//console.log("Rot"+varRot+", x="+fococamera.x+", z="+fococamera.z+", radiano"+angulo);
	//listObjEmCena[9].rotation.y = angulo;// Rotacionar  
	positionCamera()
	//renderizar();
}

function olhar(varRot){
	fococamera.y = fococamera.y+varRot;
	//anguloOlhar = Math.atan2(fococamera.z, fococamera.y); // Calcula o radiano de um vetor 2D iniciado em 0,0.
	positionCamera()
}

/*
function moverCamera(positX, positY, positZ) {
	camera.position.x = positX;
	camera.position.y = positY+45;
	camera.position.z = positZ+100;
}
*/

function positionCamera() {
	//Camera
	camera.position.y = dadosMetaVerso.maos.objeto3D.position.y+50;//camera
	camera.position.x = dadosMetaVerso.maos.objeto3D.position.x+fococamera.z*2;
	camera.position.z = dadosMetaVerso.maos.objeto3D.position.z+fococamera.x*2;
	
	dadosMetaVerso.focoCamera.position.y = dadosMetaVerso.maos.objeto3D.position.y+fococamera.y; //altura
	dadosMetaVerso.focoCamera.position.x = dadosMetaVerso.maos.objeto3D.position.x-fococamera.z*10;
	dadosMetaVerso.focoCamera.position.z = dadosMetaVerso.maos.objeto3D.position.z-fococamera.x*10;


	//Mao do player
	dadosMetaVerso.maos.objeto3D.rotation.y = angulo;// Rotacionar
	//listLus[0].position.y = dadosMetaVerso.maos.objeto3D.position.y+30;//camera
	//listLus[0].position.x = dadosMetaVerso.maos.objeto3D.position.x+fococamera.z*-20;
	//listLus[0].position.z = dadosMetaVerso.maos.objeto3D.position.z+fococamera.x*-20;

}

function moverPersonLado(varDirecao) {
	let velocidade = varDirecao;
	dadosMetaVerso.maos.objeto3D.position.x = dadosMetaVerso.maos.objeto3D.position.x+fococamera.ladoz*velocidade;
	dadosMetaVerso.maos.objeto3D.position.z = dadosMetaVerso.maos.objeto3D.position.z+fococamera.ladox*velocidade;
	if(colideForObjetos()){
		// Se bater em algo voltar para posição anterior.
		dadosMetaVerso.maos.objeto3D.position.x = dadosMetaVerso.maos.objeto3D.position.x-fococamera.ladoz*velocidade;
		dadosMetaVerso.maos.objeto3D.position.z = dadosMetaVerso.maos.objeto3D.position.z-fococamera.ladox*velocidade;
	}else{
		//se nã obateu em nada atualizar camera
		positionCamera()
	}
	atualizaMensagem();
}

function moverPersonagem(varDirecao) {
	let velocidade = 5*varDirecao;

	dadosMetaVerso.maos.objeto3D.position.x = dadosMetaVerso.maos.objeto3D.position.x+fococamera.z*velocidade;
	dadosMetaVerso.maos.objeto3D.position.z = dadosMetaVerso.maos.objeto3D.position.z+fococamera.x*velocidade;
	
	if(colideForObjetos()){
		// Se bater em algo voltar para posição anterior.
		dadosMetaVerso.maos.objeto3D.position.x = dadosMetaVerso.maos.objeto3D.position.x-fococamera.z*velocidade;
		dadosMetaVerso.maos.objeto3D.position.z = dadosMetaVerso.maos.objeto3D.position.z-fococamera.x*velocidade;
	}else{
		//se não bateu em nada atualizar camera
		positionCamera()
	}
	atualizaMensagem();
}

function atualizaMensagem(){
	// Mostrar link para pagina
	var mensagem = colideAction();
	if(contJanela==0){
		if (mensagem.titulo=="elevador"){
			idEvador.style.display = "block"; // Mostrar menu do evador
		}else if(mensagem.titulo!=""){
			idPagina.style.display = "block"; // Mostrar pagina (idPagina)
			idSpanTitulo.textContent=mensagem.titulo;
			idSpanTexto.textContent=mensagem.texto;
			idSpanURL.textContent="URL:"+mensagem.url;
			idImgPage.setAttribute('src', mensagem.img);
			idLinkURL.href = mensagem.url;
		}else{
			idEvador.style.display = "none";
			idPagina.style.display = "none";
			//Esconder menu e pagina
		} 
	}
}


function fechaJanela(){
	contJanela = 150;
	idEvador.style.display = "none";
	idPagina.style.display = "none";
}

function addEvent(el, type, callback){
	console.log("joystick - ["+type+"] Adiciona eventos pra navegadores modernos e antigos");
	//Erro no joystick.addEventListener
    if (el.addEventListener) {
         el.addEventListener(type, callback);
    } else if (el.attachEvent) {
         el.adttachEvent("on" + type, callback);
    }
}
  

// Inicio do controle ____________________________________________________________________________

function getTouchStart(el, e){
    // tocou a tela com o dedo
    e.pageY = e.touches[0].pageY;
    e.pageX = e.touches[0].pageX;
    console.log("!!!!!!!!!!!!!! _getTouchStart(), _pageY="+e.pageY+", _pageX="+e.pageX)
    //joystick.style.position  = 'absolute'; //position: absolute;
    funMousedown(el,e);
    //var novoe = e.touches[0];
    //funMousedown(joystick,novoe);
    //funMousedown(joystick,e.touches[0]); // iguinorar dulo clique.
  }

    function funMousedown(el,e) {
    //segurou joystick com o mouse.
    isMove = true;
	console.log(el)
    joystickInitLeft = el.offsetLeft; // <-----38
    joystickInitTop = el.offsetTop; // <-----398
    console.log("funMousedown(), Left="+joystickInitLeft+", Top="+joystickInitTop)
    //el.className += " isMoving"; // Não sei porqu isto esta aqui
    x = e.pageX; // <-----?
    y = e.pageY; // <-----?
    //x = window.event ? window.event.clientX : e.pageX; // <-----undefined
    //y = window.event ? window.event.clientY : e.pageY; // <-----undefined
    xel = x - el.offsetLeft; // <-----NaN
    yel = y - el.offsetTop; // <-----NaN
    console.log("funMousedown(), x="+x+", y="+y+", xel=z"+xel+", yel="+yel);
  }

  function getTouchMove(el,e){
    // Moveu o dedo na tela
    e.pageY = e.touches[0].pageY;
    e.pageX = e.touches[0].pageX;
    funMouseMove(el,e);
  }    

  function funMouseMove(el,e) {
    console.log("funMouseMove(), Left="+joystickInitLeft+", Top="+joystickInitTop);
    //movendo joystick (mouse)
    if (isMove) {
      e.preventDefault(); // Não sei o que faz
      //x = window.event ? window.event.clientX : e.pageX; // <-----undefined
      //y = window.event ? window.event.clientY : e.pageY; // <-----undefined
      x = e.pageX; // <-----?
      y = e.pageY; // <-----?
      //console.log("Movendo... , x="+x+", y="+y+", xel="+xel+", yel="+yel);
      el.style.left = (x - xel) + 'px';
      el.style.top  = (y - yel) + 'px';
	  
      var difLeft = el.offsetLeft-joystickInitLeft;
      var difTop = el.offsetTop-joystickInitTop;
	  
      if(difLeft<0){difLeft=-1*difLeft}
      if(difTop<0){difTop=-1*difTop}
	  
      if(difLeft>difTop){
        if(el.offsetLeft > joystickInitLeft){
		  if(el==joystick){
			//rotacionar(-0.25); //(ok)
			moverPersonLado(+1);
		  }else{
			//moverPersonLado(+1);
			rotacionar(-0.25);
		  }
        }else if(el.offsetLeft < joystickInitLeft){
          if(el==joystick){
			//rotacionar(+0.25); //(ok)
			moverPersonLado(-1);
		  }else{
			//moverPersonLado(-1);
			rotacionar(+0.25);
		  }
		}
      }if(difLeft<=difTop){
        if(el.offsetTop > joystickInitTop){
          if(el==joystick){
			moverPersonagem(+1); //(ok)
		  }else{
			//atirar()
			olhar(-1);
		  }
        }else if(el.offsetTop < joystickInitTop){
          if(el==joystick){
			moverPersonagem(-1); //(ok)
		  }else{
			//atirar()
			olhar(+1);
		  }
        }
      }
    }
  }
  
  function funmouseup() {
	console.log("funmouseup()");
    joystick.style.left = joystickConteiner.style.left;
    joystick.style.top  = joystickConteiner.style.top;
	joystick2.style.left = joystickConteiner2.style.left;
    joystick2.style.top  = joystickConteiner2.style.top;
    isMove = false;
  }

  //Escutando eventos joystick.
  function initJoystick() {
  
	joystickConteiner = document.getElementById("joystickConteinerID");
	joystick = document.getElementById("joystickID");
	joystickConteiner2 = document.getElementById("joystickConteinerID2");
	joystick2 = document.getElementById("joystickID2");
	
    //Usando a função addEvent() para verificar qual a melhor forma de escutar o evento.
	
    addEvent(joystick, "mousedown", function (e) {funMousedown(joystick,e)}); // Clicou com o mouse
	addEvent(joystick2, "mousedown", function (e) {funMousedown(joystick2,e)}); // Clicou com o mouse
	
	addEvent(joystickConteiner, "mousemove", function (e) {funMouseMove(joystick,e)}); //Moveu o mouse
	addEvent(joystickConteiner2, "mousemove", function (e) {funMouseMove(joystick2,e)}); //Moveu o mouse
	//addEvent(document, "mousemove", function (e) {funMouseMove(joystick,e)}); //Moveu o mouse
    addEvent(document, "mouseup", function () {funmouseup()}); //Soltou o mouse 
	
    //--------------------
	
    addEvent(joystick, "touchstart", function (e) {getTouchStart(joystick,e)}); // Clicou com o mouse
	addEvent(joystick2, "touchstart", function (e) {getTouchStart(joystick2,e)}); // Clicou com o mouse
	
	addEvent(joystickConteiner, "touchmove", function (e) {getTouchMove(joystick,e)}); //Moveu o mouse
	addEvent(joystickConteiner2, "touchmove", function (e) {getTouchMove(joystick2,e)}); //Moveu o mouse
	//addEvent(document, "touchmove", function (e) {getTouchMove(joystick,e)}); //Moveu o mouse
	addEvent(document, "touchend", function () {funmouseup()}); //Soltou o mouse
  };


</script>

<div class="divControles">
	<div class="justific controles">

		<div class="divControEsq">
			<div id="joystickConteinerID" class="joystickConteiner" >
				<div id="joystickID" class="joystickClass"></div>
			</div>
			<div>
				<span id="idSpanDados1" class="spanDados"></span><br/>
				<span id="idSpanDados2" class="spanDados"></span>
			</div>
		</div>
		
		<div id="idEvador" class="divControCentro">
			<a href="javascript:fechaJanela()">
				(x)
			</a><br/>
			<a href="javascript:initSalaEu()">
				5 Diretor
			</a><br/>
			<a href="javascript:initSalaDesign()">
				4 Designers
			</a><br/>
			<a href="javascript:initSalaTutorial()">
				3 Tutoriais
			</a><br/>
			<a href="javascript:initSalaGames()">
				2 jogos
			</a><br/>
			<a href="javascript:initSalaUtil()">
				1 Ferramentas
			</a><br/>
			<a href="javascript:initSalaHome()">
				0 Terreo
			</a><br/>
		</div>

		<div id="idPagina" class="divPagCentro">
			<a href="javascript:fechaJanela()">
				(x)
			</a><br/>
			<img id="idImgPage" src="" alt="imagem Meta vvc" width="100px" height="80px" /><br/>
			<span id="idSpanTitulo" class="spanDados"></span><br/>
			<span id="idSpanTexto" class="spanDados"></span><br/>
			Para saber mais, acesse aqui:<br/>
			<a id="idLinkURL" href="">
				<span id="idSpanURL" class="spanDados"></span>
			</a>
			<br/>
		</div>

		<div class="divControDire">
			<div id="joystickConteinerID2" class="joystickConteiner" >
				<div id="joystickID2" class="joystickClass"></div>
			</div>
			<div>
				<span id="idSpanDados3" class="spanDados"></span>
			</div>
		</div>

	</div>		
</div>

<div id="DivIntro" class="divIntro">
	MetaversoVVC<br/><br/>
	<p>
		<a id="DivIntroA" class="DivIntroA" href="javascript:init()">
			Iniciar<br/>
		</a>
	</p>
	<p>
		<br/><br/>
		O MetaversoVVC é a versão 3D do site vvcestudio.com.br, onde lugares são links.<br/>
		Totalmente desenvolvido com JavaScript sem necessidade de Pluguin.<br/>
		O modelos ainda não tem materiais aplicado, mas terá em breve.<br/>
	</p>
	<img id="DivIntroload" src="/static/assetsv5/img/loading1.gif" alt="carregando"/>	
</div>
	
</body>
</html>